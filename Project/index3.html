<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="description" content="Drawing">
  <title>Drawing</title>
  <script src="https://d3js.org/d3.v5.min.js"></script>
</head>
<body>
<script>
var w  = 300;
var h = 120;
var padding = 2;
var dataset = [5,10, 14, 20, 25, 11, 25, 22, 18, 7];
var heightmultiplier = 4

function colorPicker(v){
  if (v<=20) {return "#666666";}
  else if (v>20) {return "#FF0033"; }
}

async function init() {
const data = await d3.csv(
     'airline_delay_May_June_2018.csv');

var svg = d3.select("body").append("svg")
  .attr("width", w)
  .attr("height", h);

svg.selectAll("rect")
  .data(dataset)
  .enter()
  .append("rect")
    .attr("x", function(d, i){ return i*(w/dataset.length);}) 
    .attr("y", function(d){ return h - (d*4);})
    .attr("width",  w/dataset.length - padding)
    .attr("height", function(d){return d*4;})
    .attr("fill", function(d) {return colorPicker(d);});

svg.selectAll("text")
  .data(dataset)
  .enter()
  .append("text")
  .text(function(d) {return d;})
  .attr("text-anchor","middle")
  .attr("x", function(d, i) {return i * (w/dataset.length) + (w/dataset.length - padding)/2;})
  .attr("y", function(d){ return h - (d*4) + 15;})
  .attr("font-family", "sans-serif")
  
var dots = svg.selectAll("circle")
  .data(data)
  .enter()
  .append("circle")
  .attr("cx", function(d) {return d.total_lateminutes;})
  .attr("cy", function(d) {return h-d.count_ontime;})
  .attr("r", 5);
  
  
}
</script>
</body>
</html>